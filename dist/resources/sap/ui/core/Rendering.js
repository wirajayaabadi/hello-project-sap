/*!
 * OpenUI5
 * (c) Copyright 2009-2024 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/Log","sap/ui/base/EventProvider","sap/ui/performance/trace/Interaction","sap/ui/performance/Measurement"],(e,n,t,d)=>{"use strict";const r=e.getLogger("sap.ui.Rendering",window["sap-ui-config"]&&(window["sap-ui-config"]["xx-debugRendering"]||window["sap-ui-config"]["xx-debugrendering"])||/sap-ui-xx-debug(R|-r)endering=(true|x|X)/.test(document.location.search)?e.Level.DEBUG:Math.min(e.Level.INFO,e.getLevel()));const i=20,a=new n,s=[];let o,p={};let u=[];let g=false;const f=e=>{try{d.start("renderPendingUIUpdates","Render pending UI updates in all UIAreas");r.debug("Render pending UI updates: start ("+(e||"by timer")+")");let n=0;const t=i>0;g=true;do{if(t){n++;if(n>i){g=false;throw new Error("Rendering has been re-started too many times ("+n+"). Add URL parameter sap-ui-xx-debugRendering=true for a detailed analysis.")}if(n>1){r.debug("Render pending UI updates: iteration "+n)}}if(o){if(o!==U){clearTimeout(o)}o=undefined;if(s.length>0){s.pop()()}}c();const e=p;p={};for(const n in e){e[n].rerender()}}while(t&&o);g=false;U.fireUIUpdated();r.debug("Render pending UI updates: finished");d.end("renderPendingUIUpdates")}catch(e){const n=U.fireUIUpdated({failed:e});if(n){throw e}}};const U={notifyInteractionStep(){s.push(t.notifyAsyncStep())},addPrerenderingTask(e,n){if(n){u.unshift(e)}else{u.push(e)}},renderPendingUIUpdates(e,n){if(n!==undefined){s.push(t.notifyAsyncStep());o=setTimeout(f.bind(null,e),n)}else{f(e)}},suspend(){o=U},resume(e){U.renderPendingUIUpdates(e,0)},isPending(){return!!(o||g)},attachUIUpdated(e,n){a.attachEvent("UIUpdated",e,n)},detachUIUpdated(e,n){a.detachEvent("UIUpdated",e,n)},fireUIUpdated(e){return a.fireEvent("UIUpdated",e,true)},getLogger(){return r},invalidateUIArea(e){p[e.getId()]=e;if(!o){r.debug("Registering timer for delayed re-rendering");U.renderPendingUIUpdates("invalidated UIArea",0)}}};const c=()=>{const e=u.slice();u=[];e.forEach(e=>{e()})};return U});
//# sourceMappingURL=Rendering.js.map